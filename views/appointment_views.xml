<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--Tree View-->
    <record id="view_hospital_appointment_tree" model="ir.ui.view">
        <field name="name">hospital.appointment.tree</field>
        <field name="model">hospital.appointment</field>
        <field name="arch" type="xml">
            <tree string="Appointments">
                <field name="reference"/>
                <field name="patient_id"/>
                <field name="date_appointment" optional="show"/>
            </tree>
        </field>
    </record>

    <!--  Form View  -->
    <record id="view_hospital_appointment_form" model="ir.ui.view">
        <field name="name">hospital.appointment.form</field>
        <field name="model">hospital.appointment</field>
        <field name="arch" type="xml">
            <form string="Appointment">
                <header>
                    <!-- * If the button type is object it will call a python function with the given name inside this model
                        * Right now on clicking this button system will look for a function with the name `action_confirm`
                            inside `hospital.appointment` model, so have to define the action|_confirm function inside the
                            `hospital.appointment` model
                            // If not on upgrading we will get an error
                     -->
                    <button name="action_confirm" type="object" string="Confirm" invisible="state != 'draft'" class="oe_highlight"/>
                    <!-- If state value is not equal to `confirmed` the button has to be invisible -->
                    <!-- Added oe_highlight to the class for highlight the buttons -->
                    <button name="action_ongoing" type="object" string="Ongoing" invisible="state != 'confirmed'" class="oe_highlight"/>
                    <button name="action_done" type="object" string="Done" invisible="state != 'ongoing'" class="oe_highlight"/>
                    <button name="action_cancel" type="object" string="Cancel" invisible="state == 'done'"/>

                    <!--Newly added the status bar for track the progress, added statusbar_visible for avoid to display the cancel status
                    in unwanted progress stages-->
                    <field name="state" widget="statusbar" options="{'clickable': '1'}" statusbar_visible="draft,confirmed,ongoing,done"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="reference" readonly="True"/>
                            <field name="patient_id"/>
                            <field name="date_of_birth"/>
                            <field name="date_appointment"/>
                        </group>
                        <group>
                            <field name="total_qty"/>
                        </group>
                    </group>

                    <notebook>
                        <page name="appointment_lines" string="Lines">
                            <!--   below field automatically looking for the tree view if we're not put the tree tag inside the field tag -->
                            <!-- If we add the tree tag below we can override the tree tag, neither it will display
                                 appointment_line_views.xml tree -->
                            <field name="appointment_line_ids">
                                <tree editable="bottom"> <!-- if we don't put anything for editable attribute then it will popup for
                                enter the data, if we put bottom for editable attribute then have to enter the data below of the current lines-->
                                    <field name="product_id"/>
                                    <field name="qty"/>
                                </tree>
                                <!-- we can use the tree tags or form tags for this, same happening from both -->
                                <form>
                                    <sheet>
                                        <group>
                                            <field name="product_id"/>
                                            <field name="qty"/>
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                        </page>

                        <page name="other_info" string="Other Info">
                            <group>
                                <field name="note"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <!-- Mail thread inherited in here/ chatter added -->
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="action_hospital_appointment" model="ir.actions.act_window">
        <field name="name">Appointments</field>
        <!-- put below the model name inside the field tags-->
        <field name="res_model">hospital.appointment</field>
        <!--Put below the tree view mode and form view mode inside the field tags-->
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new appointment
            </p>
        </field>
    </record>

</odoo>